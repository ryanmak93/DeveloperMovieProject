@model ICollection<MovieApp.Models.Genre>
@{
    ViewBag.Title = "Manage Genres";
}

<span style="color:green; font-size:24px">@TempData["Success"]</span> 
<span style="color:red; font-size:24px">@TempData["Error"]</span> 

<link href="@Url.Content("~/Styles/Manage.css")" rel="stylesheet" type="text/css" />

<h2>Manage Genres</h2>

<table>
    <thead>
        <tr><th><button onclick="OpenDialog('/Movie/GenreCreate')">Add</button></th><th>Name</th><th>Movies</th></tr>
    </thead>
    <tbody>
        @foreach (var genre in Model.OrderBy(x=>x.Name))
        {
        <tr>
            <td><input type="button" value="Edit" onclick="OpenDialog('/Movie/GenreEdit?genreId=' + @genre.Id)" /></td>
            <td>@genre.Name</td>           
            <td>
                @foreach (var movie in @genre.Movies.OrderBy(x=>x.Title))
                {
                    <ul class="tdlist">@movie.Title (@movie.Year)</ul>
                }    
            </td>           
        </tr>
        }
    </tbody>
</table>

<div id='dialog' class='modal'>
    <div id="dialogcontent">
    </div>
</div>

<script src="@Url.Content("~/Scripts/Movie.js")" type="text/javascript"></script>

<style>
    .modal {
            padding-left: 20px;
            border: 1px solid black;
            background-color: white;
            position: absolute;
            left: 60%;
            margin-left: -200px;
            height: 500px;
            top: 15%;
            width: 500px;
            overflow:hidden;
        }
</style>