@model ICollection<MovieApp.Models.Movie>
@{
    ViewBag.Title = "Manage Movies";
}

<span style="color:green; font-size:24px">@TempData["Success"]</span>
<span style="color:red; font-size:24px">@TempData["Error"]</span> 

<link href="@Url.Content("~/Styles/Manage.css")" rel="stylesheet" type="text/css" />

<h2>Manage Movies</h2>

<table>
    <thead>
        <tr><th><button onclick="OpenDialog('/Movie/MovieCreate')">Add</button></th><th>Title</th><th>Year</th><th>Genres</th></tr>
    </thead>
    <tbody>
        @foreach (var movie in Model.OrderBy(m => m.Title))
        {
            <tr>
                <td><input type="button" value="Edit" onclick="OpenDialog('/Movie/MovieEdit?movieId=' + @movie.Id)" /></td>
                <td>@movie.Title</td>
                <td>@movie.Year</td>
                <td>
                    @foreach (var genre in @movie.Genres.OrderBy(g => g.Name))
                    {
                        <ul class="tdlist">@genre.Name</ul>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>

<div id='dialog' class='modal'>
        <div id="dialogcontent">            
        </div>
</div>      

<script src="@Url.Content("~/Scripts/Movie.js")" type="text/javascript"></script>

<style>
    .modal {
        padding-left:20px;
        border: 1px solid black;
        background-color: white;
        position: absolute;
        left: 60%;
        margin-left: -200px;
        height: 550px;
        top: 15%;
        width:500px;
        overflow:hidden;
    }
</style>